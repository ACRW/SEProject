<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <script src="staff_side.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script>

    //resets form
    function clearSearch(){
      document.getElementById('searchResults').innerHTML = '';
      document.getElementById("roomAvailabilityTable").hidden = true;

    }

    //unhides the correct form
    function byUser (){
      document.getElementById("byUser").hidden = false;
      document.getElementById("byEvent").hidden = true;
      document.getElementById("byAvaliability").hidden = true;
      document.getElementById('searchResults').innerHTML = '';
      document.getElementById("searchModalFooter").hidden = false;
      document.getElementById("roomAvailabilityTable").hidden = true;
    }

    //unhides the correct form
    function byEvent (){
      document.getElementById("byEvent").hidden = false;
      document.getElementById("byUser").hidden = true;
      document.getElementById("byAvaliability").hidden = true;
      document.getElementById('searchResults').innerHTML = '';
      document.getElementById("searchModalFooter").hidden = false;
      document.getElementById("roomAvailabilityTable").hidden = true;
    }

    //unhides the correct form
    function byAvaliability (){
      document.getElementById("byEvent").hidden = true;
      document.getElementById("byUser").hidden = true;
      document.getElementById("byAvaliability").hidden = false;
      document.getElementById('searchResults').innerHTML = '';
      document.getElementById("searchModalFooter").hidden = false;
      document.getElementById("roomAvailabilityTable").hidden = true;
    }

    const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    const dayNames = ["Mon", "Tues", "Wed", "Thur", "Fri", "Sat", "Sun"];
    function Calender () {
        let targetMon = new Date(); // Date of the monday of the week being looked at
        if (targetMon.getDay() != 1) {
            targetMon.setDate(targetMon.getDate() - ((targetMon.getDay() - 1) % 7));
        }

        let displayDates = function() {
            let tempDate = new Date(targetMon);
            tempDate.setDate(tempDate.getDate() + 6);
            document.getElementById("tableDate").innerHTML = monthNames[targetMon.getMonth()] + " " + targetMon.getDate() + " - " + monthNames[tempDate.getMonth()] + " " + tempDate.getDate();
            headers = document.getElementById("calTable").rows[0];
            for (i = 0; i < 7; i++) {
                newDate = new Date(targetMon);
                newDate.setDate(newDate.getDate() + i);
                headers.cells[i + 1].innerHTML = dayNames[i] + " " + newDate.getDate();
            }
        }

        displayDates();

        this.nextWeek = function() {
            targetMon.setDate(targetMon.getDate() + 7);
            displayDates();
        }

        this.prevWeek = function() {
            targetMon.setDate(targetMon.getDate() - 7);
            displayDates();
        }
    }

    //for dropdown search box for booking
    function filterUserNameFunction() {
      var input, filter, ul, li, a, i;
      input = document.getElementById("findByUserNameSearch");
      filter = input.value.toUpperCase();
      div = document.getElementById("findByUserNameDropdown");
      a = div.getElementsByTagName("a");
      for (i = 0; i < a.length; i++) {
        txtValue = a[i].textContent || a[i].innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          a[i].style.display = "";
        } else {
          a[i].style.display = "none";
        }
      }
    }

    //for dropdown search box for booking
    function filterPhoneNumberFunction() {
      var input, filter, ul, li, a, i;
      input = document.getElementById("findByPhoneNumberSearch");
      filter = input.value.toUpperCase();
      div = document.getElementById("findByPhoneNumberDropdown");
      a = div.getElementsByTagName("a");
      for (i = 0; i < a.length; i++) {
        txtValue = a[i].textContent || a[i].innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          a[i].style.display = "";
        } else {
          a[i].style.display = "none";
        }
      }
    }

    //for dropdown search box for booking
    function filterEmailFunction() {
      var input, filter, ul, li, a, i;
      input = document.getElementById("findByEmailSearch");
      filter = input.value.toUpperCase();
      div = document.getElementById("findByEmailDropdown");
      a = div.getElementsByTagName("a");
      for (i = 0; i < a.length; i++) {
        txtValue = a[i].textContent || a[i].innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          a[i].style.display = "";
        } else {
          a[i].style.display = "none";
        }
      }
    }

    function hideShow(id) {
      document.getElementById(id).classList.toggle("show");
    }
  </script>
</head>
<body>
  <div class="container" style="font-size: 100%">
    <button type="button" class="btn btn-primary newColor" onclick="clearSearch()" data-toggle="modal" data-target="#searchModal">Search</button>
    <button type="button" class="btn btn-primary newColor" onclick="" data-toggle="modal" data-target="#newEventModal">New Booking</button>
    <button type="button" class="btn btn-primary newColor" onclick="" data-toggle="modal" data-target="#notificationModal">Notifications</button>

  </div>
  <div class="modal" id="searchModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Search</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" id="searchModalBody">
          <button type="button" class="btn btn-primary newColor" onclick="byUser()" id='searchUser'>Find User</button>
          <button type="button" class="btn btn-primary newColor" onclick="byEvent()" id ='searchEvent'>Find Event</button>
          <button type="button" class="btn btn-primary newColor" onclick="byAvaliability()" id='searchAvaliability'>Check Avaliabilty</button>
          <div id='searchResults'></div>
          <form id='byUser' hidden=true>
            <div class="form-group">
              <label>First Name</label>
              <input class="form-control" id="firstnameSearch" placeholder="Enter first name or leave blank">
            </div>
            <div class="form-group">
              <label>Surname</label>
              <input class="form-control" id="surnameSearch" placeholder="Enter surname or leave blank">
            </div>
            <div class="form-group">
              <label>Email address</label>
              <input class="form-control" id="emailSearch" placeholder="Enter email or leave blank"> <!--check valid -->
            </div>
            <div class="form-group">
              <label>Phone Number</label>
              <input class="form-control" id="phoneNoSearch" placeholder="Enter phone number or leave blank"> <!--check valid -->
            </div>
          </form>
          <form id='byEvent' hidden=true>
            <div class="form-group">
              <label>Event Name</label>
              <input class="form-control" id="eventSearch" placeholder="Enter event name or leave blank"> <!--check valid -->
            </div>
            <div class="form-group">
              <label>Room</label>
              <select class="browser-default custom-select newDropdown" id="roomSelectDrop1">
                  <option selected>Select Room... </option> <!--check valid -->
                  <!--<option value="1">Music Room 1 (max 6 persons) £12/hour</option>-->
              </select>
            </div>
            <div class="form-group">
              <label>Time</label>
              <select class="browser-default custom-select newDropdown" >
                  <option selected>Select Time... </option> <!--check valid -->
                  <!--<option value="1">9:00</option>-->
              </select>
            </div>
          </form>
          <form id='byAvaliability' hidden=true>
            <div class="form-group">
              <label>Room</label>
              <select class="browser-default custom-select newDropdown" id="roomSelectDrop2">
                  <option selected>Select Room... </option> <!--check valid -->
                  <!--<option value="1">Music Room 1 (max 6 persons) £12/hour</option>-->
              </select>
            </div>
            <div class="form-group">
              <label>Year</label>
              <select class="browser-default custom-select newDropdown" id="yearAvaliableSearch">
                  <option selected>Select Year... </option> <!--check valid -->
                  <option value="2020">2020</option>
                  <option value="2021">2021</option>
                  <option value="2022">2022</option>
                  <option value="2023">2023</option>
              </select>
              <label id="monthAvaliableSearchLabel" hidden="true">Month</label>
              <select class="browser-default custom-select newDropdown" id="monthAvaliableSearch" hidden="true">
                  <option selected>Select Month... </option>
                  <option value="01">January</option>
                  <option value="02">February</option>
                  <option value="03">March</option>
                  <option value="04">April</option>
                  <option value="05">May</option>
                  <option value="06">June</option>
                  <option value="07">July</option>
                  <option value="08">August</option>
                  <option value="09">September</option>
                  <option value="10">October</option>
                  <option value="11">November</option>
                  <option value="12">December</option>
              </select>
              <label id="dayAvaliableSearchLabel" hidden="true">Day</label>
              <select class="browser-default custom-select newDropdown" id="dayAvaliableSearch" hidden="true">
                  <option selected>Select Day... </option>
              </select>
            </div>
          </form>
          <table class="table table-striped newTable" id="roomAvailabilityTable" style="margin-top:5px; text-align: center;">
            <thead>
              <tr>
                <th scope="col">Time</th>
                <th scope="col">Busy</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>9am</td>
                <td id="timeTable1"></td>
              </tr>
              <tr>
                <td>10am</td>
                <td id="timeTable2"></td>
              </tr>
              <tr>
                <td>11am</td>
                <td id="timeTable3"></td>
              </tr>
              <tr>
                <td>12pm</td>
                <td id="timeTable4"></td>
              </tr>
              <tr>
                <td>1pm</td>
                <td id="timeTable5"></td>
              </tr>
              <tr>
                <td>2pm</td>
                <td id="timeTable6"></td>
              </tr>
              <tr>
                <td>3pm</td>
                <td id="timeTable7"></td>
              </tr>
              <tr>
                <td>4pm</td>
                <td id="timeTable8"></td>
              </tr>
              <tr>
                <td>5pm</td>
                <td id="timeTable9"></td>
              </tr>
              <tr>
                <td>6pm</td>
                <td id="timeTable10"></td>
              </tr>
              <tr>
                <td>7pm</td>
                <td id="timeTable11"></td>
              </tr>
              <tr>
                <td>8pm</td>
                <td id="timeTable12"></td>
              </tr>
              <tr>
                <td>9pm</td>
                <td id="timeTable13"></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer" id="searchModalFooter">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id='searchSubmit'>Search</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" id="newEventModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Booking</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="dropdown">
            <button onclick="hideShow('findByUserNameDropdown')" class="dropbtn">Find By Username</button>
            <div id='findByUserNameDropdown' class="dropdown-content">
              <input type="text" placeholder="Search.." id="findByUserNameSearch" onkeyup="filterFunction()">
              <a href="#about">About</a>
              <a href="#base">Base</a>
              <a href="#blog">Blog</a>
              <a href="#contact">Contact</a>
              <a href="#custom">Custom</a>
              <a href="#support">Support</a>
              <a href="#tools">Tools</a>
            </div>
          </div>
          <div class="dropdown">
            <button onclick="hideShow('findByPhoneNumberDropdown')" class="dropbtn newColor">Find By Phone Number</button>
            <div id='findByPhoneNumberDropdown' class="dropdown-content">
              <input type="text" placeholder="Search.." id="findByPhoneNumberSearch" onkeyup="filterFunction()">
              <a href="#about">About</a>
              <a href="#base">Base</a>
              <a href="#blog">Blog</a>
              <a href="#contact">Contact</a>
              <a href="#custom">Custom</a>
              <a href="#support">Support</a>
              <a href="#tools">Tools</a>
            </div>
          </div>
          <div class="dropdown">
            <button onclick="hideShow('findByEmailDropdown')" class="dropbtn newColor">Find By Email</button>
            <div id='findByEmailDropdown' class="dropdown-content">
              <input type="text" placeholder="Search.." id="findByEmailSearch" onkeyup="filterFunction()">
              <a href="#about">About</a>
              <a href="#base">Base</a>
              <a href="#blog">Blog</a>
              <a href="#contact">Contact</a>
              <a href="#custom">Custom</a>
              <a href="#support">Support</a>
              <a href="#tools">Tools</a>
            </div>
          </div>
          <div class="container" style="font-size: 100%">
              <h1> Room Booking </h1>
              <p class="mt-2 "> Book a room by first selecting which room you would like to book, then choosing the date, time and duration. </p>

              <select class="browser-default custom-select newDropdown" >
                  <option selected>Select Room... </option> # Will fetch these from a database
                  <!--<option value="1">Music Room 1 (max 6 persons) £12/hour</option>-->
              </select>
              <p class="mt-2" > Select the time by clicking below, then change the duration with the drop down. </p>
              <div class="row">
                <div class="col"><button type="button" class="btn btn-primary newColor" onclick="calender.prevWeek()">Prev</button></div>
                <div class="col" ><h3 id="tableDate"></h3></div>
                <div class="col"><button type="button" class="btn btn-primary newColor" onclick="calender.nextWeek()" style="float: right;">Next</a></div>
              </div>
              <table class="table table-striped newTable" id="calTable" style="margin-top:5px; text-align: center;">
                  <thead>
                    <tr style="background-color: #C2D6B6">
                      <th>Time</th>
                      <th>Mon</th>
                      <th>Tues</th>
                      <th>Wed</th>
                      <th>Thurs</th>
                      <th>Fri</th>
                      <th>Sat</th>
                      <th>Sun</th>
                    </tr>
                  </thead>
                  <colgroup>
                      <col style="border-right: 3px solid #DDDDDD;";</col>
                  </colgroup>
                  <tbody>
                    <tr>
                      <td>9am</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>10am</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>11am</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>12pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>1pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>2pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                     <tr>
                      <td>3pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>4pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>5pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>6pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>7pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>8pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td>9pm</td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
              </table>
              <select class="browser-default custom-select newDropdown">
                  <option selected>Select Duration... </option>
                  <option value="1">30 minutes</option>
                  <option value="2">1 hour</option>
                  <option value="3">1 hour 30 minutes</option>
                  <option value="4">2 hours</option>
              </select>
              <table class="table" style="margin-top:30px">
                  <tr>
                      <td>Room</td>
                      <td>Price/Hour</td>
                      <td>Total Price</td>
                  </tr>
                  <tr>
                      <td>--</td>
                      <td>--</td>
                      <td>--</td>
                  </tr>
              </table>
              <div class="row" style="margin-bottom: 30px;">
                  <div class="col-sm-6"></div>
                  <div class="col-sm-3"><a class="btn btn-primary newColor" href="#" role="button" >Book & Pay at desk</a></div>
              </div>
          </div>
          <script>
              calender = new Calender();
          </script>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">Save changes</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" id='notificationModal' tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Notifications</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Modal body text goes here.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">Save changes</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" id='viewUsersBookingsModal' tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">User's Bookings</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Room Bookings</p>
          <table class="table table-striped newTable" id="usersCommunityBookingTable" style="margin-top:5px; text-align: center;">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Start Time</th>
                <th scope="col">End Time</th>
                <th scope="col">Price of Booking</th>
                <th scope="col">Amount Paid</th>
                <th scope="col">Room</th>
              </tr>
            </thead>
            <tbody id="usersCommunityBookingTableBody">
            </tbody>
          </table>
          <table class="table table-striped newTable" id="usersHostelBookingTable" style="margin-top:5px; text-align: center;">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Start Time</th>
                <th scope="col">End Time</th>
                <th scope="col">RoomID</th>
                <th scope="col">Price per Night</th>
                <th scope="col">Number of People</th>
              </tr>
            </thead>
            <tbody id="usersHostelBookingTableBody">
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

</body>
</html>
